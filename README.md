<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tester Casino - WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
            font-family: Arial, sans-serif;
            color: white;
            overflow: hidden;
        }
        .container {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
            max-width: 90%;
            width: 400px;
            text-align: center;
            position: relative;
        }
        h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        select, input, button {
            display: block;
            width: 100%;
            margin: 10px auto;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
        }
        button {
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        .payment-options {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>üé∞ –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</h2>
        <select id="game">
            <option value="üé≥ –ë–æ—É–ª–∏–Ω–≥">üé≥ –ë–æ—É–ª–∏–Ω–≥</option>
            <option value="üé≤ –ß–µ—Ç–Ω–æ–µ/–ù–µ—á–µ—Ç–Ω–æ–µ">üé≤ –ß–µ—Ç–Ω–æ–µ/–ù–µ—á–µ—Ç–Ω–æ–µ</option>
            <option value="üé≤ –ë–æ–ª—å—à–µ/–ú–µ–Ω—å—à–µ">üé≤ –ë–æ–ª—å—à–µ/–ú–µ–Ω—å—à–µ</option>
            <option value="‚öΩ –§—É—Ç–±–æ–ª">‚öΩ –§—É—Ç–±–æ–ª</option>
            <option value="üèÄ –ë–∞—Å–∫–µ—Ç–±–æ–ª">üèÄ –ë–∞—Å–∫–µ—Ç–±–æ–ª</option>
        </select>

        <h2>üí∞ –í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏</h2>
        <div class="payment-options">
            <button onclick="payAmount(0.20)">0.20 USD</button>
            <button onclick="payAmount(0.50)">0.50 USD</button>
            <button onclick="payAmount(1.00)">1.00 USD</button>
            <button onclick="payAmount(5.00)">5.00 USD</button>
        </div>

        <h2>üîÆ –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ö–æ–¥ –∏–≥—Ä—ã</h2>
        <select id="outcome">
            <option value="–ë–æ–ª—å—à–µ">–ë–æ–ª—å—à–µ</option>
            <option value="–ú–µ–Ω—å—à–µ">–ú–µ–Ω—å—à–µ</option>
            <option value="–ß–µ—Ç–Ω–æ–µ">–ß–µ—Ç–Ω–æ–µ</option>
            <option value="–ù–µ—á–µ—Ç–Ω–æ–µ">–ù–µ—á–µ—Ç–Ω–æ–µ</option>
        </select>

        <button id="placeBetButton" disabled>‚úÖ –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
    </div>

    <script>
        const token = "7480442854:AAEs_EILlE85qomG5-hW6rZ9bvISLqaXm4U"; // –£–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
        const chatId = "1002348053681"; // –£–∫–∞–∂–∏—Ç–µ ID –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ –≥—Ä—É–ø–ø—ã
        const cryptobotApiUrl = "331276:AAte1CdcNnWSNo8cCm737bePKXhPI0A3oEi"; // –ü—Ä–∏–º–µ—Ä URL API –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π

        let selectedBetAmount = 0;

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ Cryptobot
        async function initiatePayment(betAmount) {
            try {
                const response = await fetch(cryptobotApiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        amount: betAmount,
                        userId: Telegram.WebApp.initDataUnsafe?.user?.id, // –ò—Å–ø–æ–ª—å–∑—É–µ–º Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        game: document.getElementById("game").value,
                        outcome: document.getElementById("outcome").value
                    }),
                });
                const data = await response.json();

                if (data.status === 'success') {
                    // –ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–µ–ª, –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Å—Ç–∞–≤–∫–∏
                    selectedBetAmount = betAmount;
                    document.getElementById("placeBetButton").disabled = false;
                    alert(`–ü–ª–∞—Ç–µ–∂ –Ω–∞ —Å—É–º–º—É ${betAmount} USD —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω!`);
                } else {
                    alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ: " + data.message);
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–ª–∞—Ç–µ–∂–∞:", error);
                alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂.");
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞–≤–∫–∏ –≤ Telegram –∫–∞–Ω–∞–ª
        function sendBetToChannel(betAmount, paymentId) {
            const username = Telegram.WebApp.initDataUnsafe?.user?.username || "–ê–Ω–æ–Ω–∏–º";
            const game = document.getElementById("game").value;
            const outcome = document.getElementById("outcome").value;

            let message = `[üéâ –°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞]

üîë –ò–≥—Ä–æ–∫: ${username} üöÄ –†–µ–∂–∏–º: ${game} ‚Äî ${outcome} üí∏ –°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏: ${betAmount} USD

üí≥ –ü–ª–∞—Ç–µ–∂ ID: ${paymentId}`;

            fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ chat_id: chatId, text: message })
            }).then(() => {
                alert("–°—Ç–∞–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –∫–∞–Ω–∞–ª!");
            }).catch(err => {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞–≤–∫–∏:", err);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã
        function payAmount(amount) {
            initiatePayment(amount);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É"
        function handlePlaceBetClick() {
            if (selectedBetAmount > 0) {
                sendBetToChannel(selectedBetAmount, "paymentId123"); // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è paymentId, –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID
            } else {
                alert("–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–ª–∞—Ç–µ–∂!");
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É
        document.getElementById("placeBetButton").addEventListener("click", handlePlaceBetClick);
    </script>
</body>
</html>
